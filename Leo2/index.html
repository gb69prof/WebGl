<!doctype html>
<html lang="it">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Leopardi - Lezione Immersiva</title>
<style>
body{margin:0;font-family:Arial, sans-serif;display:grid;grid-template-columns:1fr 1fr 1fr;height:100vh;}
section{padding:20px;overflow:auto;border-right:1px solid #ccc;}
#center{background:#0b1220;color:white;display:flex;align-items:center;justify-content:center;font-size:20px;}
.hot{color:#1d4ed8;font-weight:bold;cursor:pointer;}
img{max-width:100%;}
</style>
</head>
<body>
<section id="left"></section>
<section id="center">Spazio 3D attivo</section>
<section id="right"><img id="schemaImg"/></section>

<script>
const lessonUrl = "assets/lesson.txt";
const left = document.getElementById("left");
const schemaImg = document.getElementById("schemaImg");

fetch(lessonUrl)
.then(r=>r.text())
.then(text=>{
  text = text.replace(/(sensismo|pessimismo storico|pessimismo cosmico|ginestra|infinito)/gi,
    '<span class="hot">$1</span>');
  left.innerHTML = text.replace(/\n/g,"<br>");
});

left.addEventListener("click", e=>{
  if(e.target.classList.contains("hot")){
    const word = e.target.innerText.toLowerCase();
    schemaImg.src = "assets/img/" + word + ".png";
    document.getElementById("center").innerText = "Concetto attivo: " + word;
  }
});
</script>
</body>
</html>
